---
title: "R Notebook"
output: html_notebook
---
```{r message=FALSE, warning=FALSE}
install.packages('data.table',repos='https://cran.fiocruz.br/')
install.packages('plyr',repos='https://cran.fiocruz.br/')
install.packages('dplyr',repos='https://cran.fiocruz.br/')
install.packages('stringr',repos='https://cran.fiocruz.br/')
install.packages('ggplot2',repos='https://cran.fiocruz.br/')
install.packages('maps',repos='https://cran.fiocruz.br/')
install.packages('bit64',repos='https://cran.fiocruz.br/')
install.packages('RColorBrewer',repos='https://cran.fiocruz.br/')
install.packages('choroplethr',repos='https://cran.fiocruz.br/')
```
```{r}
install.packages('choroplethr',repos='https://cran.fiocruz.br/')

```


```{r}
library(data.table)
library(plyr)
library(dplyr)
library(stringr)
library(ggplot2)
library(maps)
library(bit64)
library(RColorBrewer)
library(choroplethr)
```


```{r}
ann2017 <- fread('data/2017.annual.singlefile.csv', sep=',')
```

```{r}
dim(ann2017)
```


```{r}
head(ann2017)
```

```{r}
for(u in c('agglevel','area','industry','ownership','size')){
assign(u,read.csv(paste('data/',u,'_titles.csv',sep=''),stringsAsFactors=
F))
}
```

```{r}
codes <- c('agglevel','industry','ownership','size')
ann2017full <- ann2017
for(i in 1:length(codes)){
eval(parse(text=paste('ann2017full <- left_join(ann2017full, ',codes[i],')', sep='')))
}
```

